"use strict";class Blogs{getBlogs=async()=>{try{const t=await fetch("/data/blog-data/blogs.json");return await t.json()}catch(t){console.error(t)}};displayBlogs=t=>{const e=document.querySelector(".blog__content");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="blog__card">\n                        <div class="blog__image">\n                            <img src="${t.image}" alt="" class="blog__img">\n                            <a href="#" class="blog__button">\n                                <img src="${t.btnIcon}" alt="arrow icon" width="20px" height="20px">\n                            </a>\n                        </div>\n                        <div class="blog__data">\n                            <h4 class="blog__title">${t.title}</h4>\n                            <p class="blog__description">${t.description}</p>\n                            <div class="blog__footer">\n                                <div class="blog__reaction">\n                                    <img src="${t.commentIcon}" alt="coment icon" width="30px" height="30px">\n                                    <span>${t.commentNum}</span>\n                                </div>\n                                <div class="blog__reaction">\n                                    <img src="${t.showIcon}" alt="reaction icon" width="30px" height="30px">\n                                    <span>${t.showNum}K</span>\n                                </div>\n                            </div>\n                        </div>\n                    </article>\n                `)}))}}(async()=>{const t=new Blogs,e=await t.getBlogs();t.displayBlogs(e)})();const domElements=()=>{const t=document.querySelector(".nav__list"),e=document.querySelector(".nav__menu"),s=document.getElementById("menu-btn"),n=document.getElementById("nav-close");return{navList:t,navMenu:e,closeNavMenu:()=>{e&&e.classList.remove("show-menu")},menuBtn:s,navClose:n}};let{navList:navList,navMenu:navMenu,closeNavMenu:closeNavMenu,menuBtn:menuBtn,navClose:navClose}=domElements();class NavLinks{getLinks=async()=>{try{const t=await fetch("/data/nav-data/navlinks.json");return await t.json()}catch(t){console.error(t)}};displayNavLinks=t=>{t.forEach((t=>{navList&&navList.insertAdjacentHTML("beforeend",`\n                <li class="nav__item">\n                    <a href="${t.link}" class="nav__link active-link" onclick="closeNavMenu()">${t.text}</a>\n                </li>`)}))};openMobMenu=()=>{menuBtn&&menuBtn.addEventListener("click",(()=>navMenu.classList.add("show-menu"))),navClose&&navClose.addEventListener("click",(()=>navMenu.classList.remove("show-menu")))}}(async()=>{const t=new NavLinks,e=await t.getLinks();t.displayNavLinks(e),t.openMobMenu()})();class Products{displayProducts=async()=>{const t=["/data/products-data/amped.json","/data/products-data/mochas.json","/data/products-data/lattes.json"].map((async t=>{const e=await fetch(t);return await e.json()})),e=await Promise.all(t);let s,n,a;s=e[0],n=e[1],a=e[2],this.ampedController(s),this.mochaController(n),this.latteController(a),this.productTabsController()};latteController(t){const e=document.querySelector("#lattes .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}mochaController(t){const e=document.querySelector("#mochas .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}ampedController(t){const e=document.querySelector("#amped .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}productTabsController=()=>{const t=document.querySelectorAll(".products__item");function e(e){const s=e.currentTarget,n=s.dataset.product;document.querySelectorAll(".products__content").forEach((t=>{t.classList.remove("active-content")})),t.forEach((t=>{t.classList.remove("active-link")})),document.querySelector(`#${n}`).classList.add("active-content"),s.classList.add("active-link")}t.forEach((t=>{t.addEventListener("click",e)}))}}(async()=>{(new Products).displayProducts()})();const globals=()=>({containers:document.querySelectorAll(".slide__container"),slides:[...document.querySelectorAll(".slide__container")],prevBtn:document.querySelector(".prev__slide"),nextBtn:document.querySelector(".next__slide"),currSlide:0});let{containers:containers,slides:slides,prevBtn:prevBtn,nextBtn:nextBtn,currSlide:currSlide}={containers:document.querySelectorAll(".slide__container"),slides:[...document.querySelectorAll(".slide__container")],prevBtn:document.querySelector(".prev__slide"),nextBtn:document.querySelector(".next__slide"),currSlide:0};class Testimonials{getSlides=async()=>{try{const t=await fetch("/data/slider-data/slider-data.json");return await t.json()}catch(t){console.error(t)}};displaySlides=t=>{containers&&containers.forEach(((e,s)=>{t.forEach(((t,n)=>{s===n&&(e.innerHTML=`\n                        <div class="slide">\n                            <img src="${t.quoteIcon}" alt="" class="slide__quote" width="30px" height="30px">\n                            <div class="user">\n                                <img src="${t.image}" alt="" class="user__img">\n                                <div class="user__info">\n                                    <h3>${t.name}</h3>\n                                    <div class="user__stars">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                    </div>\n                                </div>\n                            </div>\n                            <p class="user__description">${t.description}</p>\n                        </div> `)}))}))};removeActive=(t,e)=>{t[e].classList.remove("active-slide")};addActive=(t,e)=>{t[e].classList.add("active-slide")};setupSlides=()=>{nextBtn&&(nextBtn.onclick=()=>{this.removeActive(slides,currSlide),currSlide=(currSlide+1)%slides.length,this.addActive(slides,currSlide)}),prevBtn&&(prevBtn.onclick=()=>{this.removeActive(slides,currSlide),currSlide=(currSlide-1+slides.length)%slides.length,this.addActive(slides,currSlide)})}}(async()=>{const t=new Testimonials,e=await t.getSlides();t.displaySlides(e),t.setupSlides()})();class Specialities{getGroups=async()=>{try{const t=await fetch("/data/speciality-data/speciality.json");return await t.json()}catch(t){console.error(t)}};displaySpecialities=t=>{const e=document.querySelector(".speciality__category");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <div class="speciality__group speciality__line">\n                        <img src="${t.image}" alt="" class="speciality__img" width="20px" height="20px">\n                        <h3 class="speciality__title">${t.title}</h3>\n                        <p class="speciality__description">${t.description}</p>\n                    </div>\n                `)}))}}function scrollHeader(){const t=document.getElementById("header");this.scrollY>=50?t.classList.add("scroll-header"):t.classList.remove("scroll-header")}(async()=>{const t=new Specialities,e=await t.getGroups();t.displaySpecialities(e)})(),window.addEventListener("scroll",scrollHeader);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BsYXlCbG9ncy5qcyIsImRpc3BsYXlMaW5rcy5qcyIsImRpc3BsYXlQcm9kdWN0cy5qcyIsImRpc3BsYXlTbGlkZXMuanMiLCJkaXNwbGF5U3BlY2lhbGl0aWVzLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIkJsb2dzIiwiZ2V0QmxvZ3MiLCJhc3luYyIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiZGlzcGxheUJsb2dzIiwiYmxvZ3MiLCJibG9nQ29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJibG9nIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiaW1hZ2UiLCJidG5JY29uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNvbW1lbnRJY29uIiwiY29tbWVudE51bSIsInNob3dJY29uIiwic2hvd051bSIsImFwaUJsb2dzIiwiZG9tRWxlbWVudHMiLCJuYXZMaXN0IiwibmF2TWVudSIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsIm5hdkNsb3NlIiwiY2xvc2VOYXZNZW51IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiTmF2TGlua3MiLCJnZXRMaW5rcyIsImRpc3BsYXlOYXZMaW5rcyIsImxpbmtzIiwibGluayIsInRleHQiLCJvcGVuTW9iTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGQiLCJuYXZsaW5rcyIsIlByb2R1Y3RzIiwiZGlzcGxheVByb2R1Y3RzIiwicHJvbWlzZXMiLCJtYXAiLCJ1cmwiLCJkYXRhIiwiUHJvbWlzZSIsImFsbCIsImFtcGVkIiwibW9jaGFzIiwibGF0dGVzIiwidGhpcyIsImFtcGVkQ29udHJvbGxlciIsIm1vY2hhQ29udHJvbGxlciIsImxhdHRlQ29udHJvbGxlciIsInByb2R1Y3RUYWJzQ29udHJvbGxlciIsImxhdHRlV3JhcHBlciIsImxhdHRlIiwicHJpY2UiLCJuYW1lIiwiY2FydEljb24iLCJtb2NoYVdyYXBwZXIiLCJtb2NoYSIsImFtcGVkV3JhcHBlciIsIml0ZW0iLCJwcm9kdWN0c0xpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImNoYW5nZVByb2R1Y3RzIiwiZSIsImxpbmtUYXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicHJvZHVjdCIsImRhdGFzZXQiLCJjb250ZW50IiwiZ2xvYmFscyIsImNvbnRhaW5lcnMiLCJzbGlkZXMiLCJwcmV2QnRuIiwibmV4dEJ0biIsImN1cnJTbGlkZSIsIlRlc3RpbW9uaWFscyIsImdldFNsaWRlcyIsImRpc3BsYXlTbGlkZXMiLCJjb250YWluZXIiLCJjSWR4Iiwic2xpZGUiLCJzSWR4IiwiaW5uZXJIVE1MIiwicXVvdGVJY29uIiwic3Rhckljb24iLCJyZW1vdmVBY3RpdmUiLCJlbGVtZW50IiwiYWRkQWN0aXZlIiwic2V0dXBTbGlkZXMiLCJvbmNsaWNrIiwibGVuZ3RoIiwidGVzdGltb25pYWxzIiwiU3BlY2lhbGl0aWVzIiwiZ2V0R3JvdXBzIiwiZGlzcGxheVNwZWNpYWxpdGllcyIsImdyb3VwcyIsImNhdGVnb3J5IiwiZ3JvdXAiLCJzY3JvbGxIZWFkZXIiLCJoZWFkZXIiLCJzY3JvbGxZIiwic3BlY2lhbGl0aWVzIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLE1BQUFBLE1BQ0FDLFNBQUFDLFVBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLDhCQUVBLGFBREFELEVBQUFFLE1BS0EsQ0FGQSxNQUFBQyxHQUNBQyxRQUFBRCxNQUFBQSxFQUNBLEdBR0FFLGFBQUFDLElBQ0EsTUFBQUMsRUFBQUMsU0FBQUMsY0FBQSxrQkFDQUgsRUFBQUksU0FBQUMsSUFDQUosR0FDQUEsRUFBQUssbUJBQUEsWUFBQSxnSkFHQUQsRUFBQUUsOElBRUFGLEVBQUFHLGtPQUlBSCxFQUFBSSx3RUFDQUosRUFBQUssd0xBR0FMLEVBQUFNLHlHQUNBTixFQUFBTywwS0FHQVAsRUFBQVEsd0dBQ0FSLEVBQUFTLGdMQU1BLEdBQ0EsRUFJQSxXQUNBLE1BQUFkLEVBQUEsSUFBQVQsTUFDQXdCLFFBQUFmLEVB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QUEsRUFHQXVELFlBQUEsS0FDQWYsVUFDQUEsUUFBQWdCLFFBQUEsS0FDQTNDLEtBQUF1QyxhQUFBZCxPQUFBRyxXQUNBQSxXQUFBQSxVQUFBLEdBQUFILE9BQUFtQixPQUNBNUMsS0FBQXlDLFVBQUFoQixPQUFBRyxVQUFBLEdBSUFGLFVBQ0FBLFFBQUFpQixRQUFBLEtBQ0EzQyxLQUFBdUMsYUFBQWQsT0FBQUcsV0FDQUEsV0FBQUEsVUFBQSxFQUFBSCxPQUFBbUIsUUFBQW5CLE9BQUFtQixPQUNBNUMsS0FBQXlDLFVBQUFoQixPQUFBRyxVQUFBLEVBRUEsRUFJQSxXQUNBLE1BQUFpQixFQUFBLElBQUFoQixhQUNBSixRQUFBb0IsRUFBQWYsWUFDQWUsRUFBQWQsY0FBQU4sR0FDQW9CLEVBQUFILGFBQ0EsRUFMQSxHQzlFQSxNQUFBSSxhQUNBQyxVQUFBcEcsVUFDQSxJQUNBLE1BQUFDLFFBQUFDLE1BQUEseUNBRUEsYUFEQUQsRUFBQUUsTUFLQSxDQUZBLE1BQUFDLEdBQ0FDLFFBQUFELE1BQUFBLEVBQ0EsR0FHQWlHLG9CQUFBQyxJQUNBLE1BQUFDLEVBQUE5RixTQUFBQyxjQUFBLHlCQUNBNEYsRUFBQTNGLFNBQUE2RixJQUNBRCxHQUNBQSxFQUFBMUYsbUJBQUEsWUFBQSw2R0FFQTJGLEVBQUExRiw0SEFDQTBGLEVBQUF4RiwwRUFDQXdGLEVBQUF2RixnRUFHQSxHQUNBLEVDeEJBLFNBQUF3RixlQUNBLE1BQUFDLEVBQUFqRyxTQUFBa0IsZUFBQSxVQUVBMEIsS0FBQXNELFNBQUEsR0FDQUQsRUFBQTVFLFVBQUFVLElBQUEsaUJBR0FrRSxFQUFBNUUsVUFBQUMsT0FBQSxnQkFFQSxDRG1CQSxXQUNBLE1BQUE2RSxFQUFBLElBQUFULGFBQ0FHLFFBQUFNLEVBQUFSLFlBQ0FRLEVBQUFQLG9CQUFBQyxFQUNBLEVBSkEsR0NoQkFPLE9BQUF0RSxpQkFBQSxTQUFBa0UiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNsYXNzIEJsb2dzIHtcclxuICAgIGdldEJsb2dzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9ibG9nLWRhdGEvYmxvZ3MuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBibG9ncyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gYmxvZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5QmxvZ3MgPSBibG9ncyA9PiB7XHJcbiAgICAgICAgY29uc3QgYmxvZ0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJsb2dfX2NvbnRlbnRcIilcclxuICAgICAgICBibG9ncy5mb3JFYWNoKGJsb2cgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYmxvZ0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIGJsb2dDb250ZW50Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJibG9nX19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibG9nX19pbWFnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Jsb2cuaW1hZ2V9XCIgYWx0PVwiXCIgY2xhc3M9XCJibG9nX19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJibG9nX19idXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7YmxvZy5idG5JY29ufVwiIGFsdD1cImFycm93IGljb25cIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmxvZ19fZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiYmxvZ19fdGl0bGVcIj4ke2Jsb2cudGl0bGV9PC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiYmxvZ19fZGVzY3JpcHRpb25cIj4ke2Jsb2cuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJsb2dfX2Zvb3RlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibG9nX19yZWFjdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7YmxvZy5jb21tZW50SWNvbn1cIiBhbHQ9XCJjb21lbnQgaWNvblwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtibG9nLmNvbW1lbnROdW19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibG9nX19yZWFjdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7YmxvZy5zaG93SWNvbn1cIiBhbHQ9XCJyZWFjdGlvbiBpY29uXCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2Jsb2cuc2hvd051bX1LPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgICAgIGApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGJsb2dzID0gbmV3IEJsb2dzKClcclxuICAgIGNvbnN0IGFwaUJsb2dzID0gYXdhaXQgYmxvZ3MuZ2V0QmxvZ3MoKVxyXG4gICAgYmxvZ3MuZGlzcGxheUJsb2dzKGFwaUJsb2dzKVxyXG59KSgpOyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5jb25zdCBkb21FbGVtZW50cyA9ICgpID0+IHtcclxuICAgIGNvbnN0IG5hdkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbGlzdFwiKVxyXG4gICAgY29uc3QgbmF2TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19tZW51XCIpXHJcbiAgICBjb25zdCBtZW51QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51LWJ0blwiKVxyXG4gICAgY29uc3QgbmF2Q2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdi1jbG9zZVwiKVxyXG4gICAgY29uc3QgY2xvc2VOYXZNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmKG5hdk1lbnUpIG5hdk1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbWVudVwiKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgbmF2TGlzdCwgbmF2TWVudSwgY2xvc2VOYXZNZW51LCBtZW51QnRuLCBuYXZDbG9zZSB9XHJcbn07XHJcblxyXG5sZXQge25hdkxpc3QsIG5hdk1lbnUsIGNsb3NlTmF2TWVudSwgbWVudUJ0biwgbmF2Q2xvc2V9ID0gZG9tRWxlbWVudHMoKVxyXG5cclxuY2xhc3MgTmF2TGlua3Mge1xyXG4gICAgIGdldExpbmtzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9uYXYtZGF0YS9uYXZsaW5rcy5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBsaW5rcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlOYXZMaW5rcyA9IGxpbmtzID0+IHtcclxuICAgICAgICBsaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICBpZiAobmF2TGlzdCkge1xyXG4gICAgICAgICAgICAgICAgbmF2TGlzdC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2X19pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7bGluay5saW5rfVwiIGNsYXNzPVwibmF2X19saW5rIGFjdGl2ZS1saW5rXCIgb25jbGljaz1cImNsb3NlTmF2TWVudSgpXCI+JHtsaW5rLnRleHR9PC9hPlxyXG4gICAgICAgICAgICAgICAgPC9saT5gKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBvcGVuTW9iTWVudSA9ICgpID0+IHtcclxuICAgICAgICBpZiAobWVudUJ0bikgbWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gbmF2TWVudS5jbGFzc0xpc3QuYWRkKFwic2hvdy1tZW51XCIpKVxyXG4gICAgXHJcbiAgICAgICAgaWYgKG5hdkNsb3NlKSBuYXZDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gbmF2TWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1tZW51XCIpKVxyXG4gICAgfTtcclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBuYXZsaW5rcyA9IG5ldyBOYXZMaW5rcygpXHJcbiAgICBjb25zdCBsaW5rcyA9IGF3YWl0IG5hdmxpbmtzLmdldExpbmtzKClcclxuICAgIG5hdmxpbmtzLmRpc3BsYXlOYXZMaW5rcyhsaW5rcylcclxuICAgIG5hdmxpbmtzLm9wZW5Nb2JNZW51KClcclxufSkoKTtcclxuXHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY2xhc3MgUHJvZHVjdHMge1xyXG4gICAgZGlzcGxheVByb2R1Y3RzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVybHMgPSBbXHJcbiAgICAgICAgICAgIFwiL2RhdGEvcHJvZHVjdHMtZGF0YS9hbXBlZC5qc29uXCIsXHJcbiAgICAgICAgICAgIFwiL2RhdGEvcHJvZHVjdHMtZGF0YS9tb2NoYXMuanNvblwiLFxyXG4gICAgICAgICAgICBcIi9kYXRhL3Byb2R1Y3RzLWRhdGEvbGF0dGVzLmpzb25cIlxyXG4gICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IHVybHMubWFwKGFzeW5jIHVybCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxyXG4gICAgXHJcbiAgICAgICAgbGV0IGFtcGVkLCBtb2NoYXMsIGxhdHRlcztcclxuICAgICAgICBhbXBlZCA9IGRhdGFbMF07XHJcbiAgICAgICAgbW9jaGFzID0gZGF0YVsxXTtcclxuICAgICAgICBsYXR0ZXMgPSBkYXRhWzJdO1xyXG4gICAgXHJcbiAgICAgICAgdGhpcy5hbXBlZENvbnRyb2xsZXIoYW1wZWQpO1xyXG5cclxuICAgICAgICB0aGlzLm1vY2hhQ29udHJvbGxlcihtb2NoYXMpO1xyXG5cclxuICAgICAgICB0aGlzLmxhdHRlQ29udHJvbGxlcihsYXR0ZXMpO1xyXG5cclxuICAgICAgICB0aGlzLnByb2R1Y3RUYWJzQ29udHJvbGxlcigpXHJcbiAgICB9XHJcblxyXG4gICAgbGF0dGVDb250cm9sbGVyKGxhdHRlcykge1xyXG4gICAgICAgIGNvbnN0IGxhdHRlV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGF0dGVzIC5wcm9kdWN0c19fd3JhcHBlclwiKTtcclxuICAgICAgICBsYXR0ZXMuZm9yRWFjaChsYXR0ZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsYXR0ZVdyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgIGxhdHRlV3JhcHBlci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwicHJvZHVjdHNfX2NhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzX19zaGFwZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2xhdHRlLmltYWdlfVwiIGFsdD1cImNha2UgcHJvZHVjdFwiIGNsYXNzPVwicHJvZHVjdHNfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzX19kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzX19wcmljZVwiPiR7bGF0dGUucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fbmFtZVwiPiR7bGF0dGUubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIHByb2R1Y3RzX19idXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bGF0dGUuY2FydEljb259XCIgYWx0PVwic2hvcHBpbmcgY2FydFwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1vY2hhQ29udHJvbGxlcihtb2NoYXMpIHtcclxuICAgICAgICBjb25zdCBtb2NoYVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vY2hhcyAucHJvZHVjdHNfX3dyYXBwZXJcIik7XHJcbiAgICAgICAgbW9jaGFzLmZvckVhY2gobW9jaGEgPT4ge1xyXG4gICAgICAgICAgICBpZiAobW9jaGFXcmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICBtb2NoYVdyYXBwZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGBcclxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cInByb2R1Y3RzX19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0c19fc2hhcGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHttb2NoYS5pbWFnZX1cIiBhbHQ9XCJjYWtlIHByb2R1Y3RcIiBjbGFzcz1cInByb2R1Y3RzX19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0c19fZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fcHJpY2VcIj4ke21vY2hhLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX25hbWVcIj4ke21vY2hhLm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBwcm9kdWN0c19fYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke21vY2hhLmNhcnRJY29ufVwiIGFsdD1cInNob3BwaW5nIGNhcnRcIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxyXG4gICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhbXBlZENvbnRyb2xsZXIoYW1wZWQpIHtcclxuICAgICAgICBjb25zdCBhbXBlZFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FtcGVkIC5wcm9kdWN0c19fd3JhcHBlclwiKTtcclxuICAgICAgICBhbXBlZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoYW1wZWRXcmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICBhbXBlZFdyYXBwZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGBcclxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cInByb2R1Y3RzX19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0c19fc2hhcGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtpdGVtLmltYWdlfVwiIGFsdD1cImNha2UgcHJvZHVjdFwiIGNsYXNzPVwicHJvZHVjdHNfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzX19kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzX19wcmljZVwiPiR7aXRlbS5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzX19uYW1lXCI+JHtpdGVtLm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBwcm9kdWN0c19fYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2l0ZW0uY2FydEljb259XCIgYWx0PVwic2hvcHBpbmcgY2FydFwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2R1Y3RUYWJzQ29udHJvbGxlciA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0c0xpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0c19faXRlbVwiKVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlUHJvZHVjdHMoZSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rVGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gbGlua1RhcmdldC5kYXRhc2V0LnByb2R1Y3Q7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RzQ29udGVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2R1Y3RzX19jb250ZW50XCIpXHJcbiAgICBcclxuICAgICAgICAgICAgcHJvZHVjdHNDb250ZW50cy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWNvbnRlbnRcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcHJvZHVjdHNMaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWxpbmtcIilcclxuICAgICAgICAgICAgfSlcclxuICAgIFxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtwcm9kdWN0fWApLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtY29udGVudFwiKVxyXG4gICAgICAgICAgICBsaW5rVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtbGlua1wiKVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHByb2R1Y3RzTGlua3MuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hhbmdlUHJvZHVjdHMpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcHJvZHVjdHMgPSBuZXcgUHJvZHVjdHMoKVxyXG4gICAgcHJvZHVjdHMuZGlzcGxheVByb2R1Y3RzKClcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY29uc3QgZ2xvYmFscyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlX19jb250YWluZXJcIilcclxuICAgIGNvbnN0IHNsaWRlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlX19jb250YWluZXJcIildXHJcbiAgICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmV2X19zbGlkZVwiKVxyXG4gICAgY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV4dF9fc2xpZGVcIilcclxuICAgIGxldCBjdXJyU2xpZGUgPSAwO1xyXG4gICAgcmV0dXJuIHtjb250YWluZXJzLCBzbGlkZXMsIHByZXZCdG4sIG5leHRCdG4sIGN1cnJTbGlkZX1cclxufTtcclxubGV0IHtjb250YWluZXJzLCBzbGlkZXMsIHByZXZCdG4sIG5leHRCdG4sIGN1cnJTbGlkZX0gPSBnbG9iYWxzKClcclxuXHJcbmNsYXNzIFRlc3RpbW9uaWFscyB7XHJcbiAgICBnZXRTbGlkZXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9kYXRhL3NsaWRlci1kYXRhL3NsaWRlci1kYXRhLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3Qgc2xpZGVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBzbGlkZXNcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlTbGlkZXMgPSBzbGlkZXMgPT4ge1xyXG4gICAgICAgIGlmIChjb250YWluZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lcnMuZm9yRWFjaCgoY29udGFpbmVyLCBjSWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXMuZm9yRWFjaCgoc2xpZGUsIHNJZHgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY0lkeCA9PT0gc0lkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtzbGlkZS5xdW90ZUljb259XCIgYWx0PVwiXCIgY2xhc3M9XCJzbGlkZV9fcXVvdGVcIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXNlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtzbGlkZS5pbWFnZX1cIiBhbHQ9XCJcIiBjbGFzcz1cInVzZXJfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1c2VyX19pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz4ke3NsaWRlLm5hbWV9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVzZXJfX3N0YXJzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7c2xpZGUuc3Rhckljb259XCIgYWx0PVwiXCIgY2xhc3M9XCJzdGFyXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3NsaWRlLnN0YXJJY29ufVwiIGFsdD1cIlwiIGNsYXNzPVwic3RhclwiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtzbGlkZS5zdGFySWNvbn1cIiBhbHQ9XCJcIiBjbGFzcz1cInN0YXJcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7c2xpZGUuc3Rhckljb259XCIgYWx0PVwiXCIgY2xhc3M9XCJzdGFyXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3NsaWRlLnN0YXJJY29ufVwiIGFsdD1cIlwiIGNsYXNzPVwic3RhclwiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidXNlcl9fZGVzY3JpcHRpb25cIj4ke3NsaWRlLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IGBcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUFjdGl2ZSA9IChpdGVtLCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaXRlbVtlbGVtZW50XS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXNsaWRlXCIpXHJcbiAgICB9XHJcblxyXG4gICAgYWRkQWN0aXZlID0gKGl0ZW0sIGVsZW1lbnQpID0+IHtcclxuICAgICAgICBpdGVtW2VsZW1lbnRdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtc2xpZGVcIilcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cFNsaWRlcyA9ICgpID0+IHtcclxuICAgICAgICBpZiAobmV4dEJ0bikge1xyXG4gICAgICAgICAgICBuZXh0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZShzbGlkZXMsIGN1cnJTbGlkZSlcclxuICAgICAgICAgICAgICAgIGN1cnJTbGlkZSA9IChjdXJyU2xpZGUgKyAxKSAlIHNsaWRlcy5sZW5ndGhcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aXZlKHNsaWRlcywgY3VyclNsaWRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJldkJ0bikge1xyXG4gICAgICAgICAgICBwcmV2QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZShzbGlkZXMsIGN1cnJTbGlkZSlcclxuICAgICAgICAgICAgICAgIGN1cnJTbGlkZSA9IChjdXJyU2xpZGUgLSAxICsgc2xpZGVzLmxlbmd0aCkgJSBzbGlkZXMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFjdGl2ZShzbGlkZXMsIGN1cnJTbGlkZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCB0ZXN0aW1vbmlhbHMgPSBuZXcgVGVzdGltb25pYWxzKClcclxuICAgIGNvbnN0IHNsaWRlcyA9IGF3YWl0IHRlc3RpbW9uaWFscy5nZXRTbGlkZXMoKVxyXG4gICAgdGVzdGltb25pYWxzLmRpc3BsYXlTbGlkZXMoc2xpZGVzKVxyXG4gICAgdGVzdGltb25pYWxzLnNldHVwU2xpZGVzKClcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY2xhc3MgU3BlY2lhbGl0aWVzIHtcclxuICAgIGdldEdyb3VwcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvc3BlY2lhbGl0eS1kYXRhL3NwZWNpYWxpdHkuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBncm91cHMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlTcGVjaWFsaXRpZXMgPSBncm91cHMgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGVjaWFsaXR5X19jYXRlZ29yeVwiKVxyXG4gICAgICAgIGdyb3Vwcy5mb3JFYWNoKGdyb3VwID0+IHtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeS5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGVjaWFsaXR5X19ncm91cCBzcGVjaWFsaXR5X19saW5lXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtncm91cC5pbWFnZX1cIiBhbHQ9XCJcIiBjbGFzcz1cInNwZWNpYWxpdHlfX2ltZ1wiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwic3BlY2lhbGl0eV9fdGl0bGVcIj4ke2dyb3VwLnRpdGxlfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic3BlY2lhbGl0eV9fZGVzY3JpcHRpb25cIj4ke2dyb3VwLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIGApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHNwZWNpYWxpdGllcyA9IG5ldyBTcGVjaWFsaXRpZXMoKVxyXG4gICAgY29uc3QgZ3JvdXBzID0gYXdhaXQgc3BlY2lhbGl0aWVzLmdldEdyb3VwcygpXHJcbiAgICBzcGVjaWFsaXRpZXMuZGlzcGxheVNwZWNpYWxpdGllcyhncm91cHMpXHJcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmZ1bmN0aW9uIHNjcm9sbEhlYWRlcigpIHtcclxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyXCIpXHJcblxyXG4gICAgaWYgKHRoaXMuc2Nyb2xsWSA+PSA1MCkge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsLWhlYWRlclwiKVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzY3JvbGwtaGVhZGVyXCIpXHJcbiAgICB9XHJcbn07XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2Nyb2xsSGVhZGVyKTtcclxufSkoKVxyXG5cclxuIl19
