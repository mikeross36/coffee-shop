"use strict";class Blogs{getBlogs=async()=>{try{const t=await fetch("/data/blog-data/blogs.json");return await t.json()}catch(t){console.error(t)}};displayBlogs=t=>{const e=document.querySelector(".blog__content");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="blog__card">\n                        <div class="blog__image">\n                            <img src="${t.image}" alt="" class="blog__img">\n                            <a href="#" class="blog__button">\n                                <img src="${t.btnIcon}" alt="arrow icon" width="20px" height="20px">\n                            </a>\n                        </div>\n                        <div class="blog__data">\n                            <h4 class="blog__title">${t.title}</h4>\n                            <p class="blog__description">${t.description}</p>\n                            <div class="blog__footer">\n                                <div class="blog__reaction">\n                                    <img src="${t.commentIcon}" alt="coment icon" width="30px" height="30px">\n                                    <span>${t.commentNum}</span>\n                                </div>\n                                <div class="blog__reaction">\n                                    <img src="${t.showIcon}" alt="reaction icon" width="30px" height="30px">\n                                    <span>${t.showNum}K</span>\n                                </div>\n                            </div>\n                        </div>\n                    </article>\n                `)}))}}(async()=>{const t=new Blogs,e=await t.getBlogs();t.displayBlogs(e)})();const domElements=()=>{const t=document.querySelector(".nav__list"),e=document.querySelector(".nav__menu"),s=document.getElementById("menu-btn"),n=document.getElementById("nav-close");return{navList:t,navMenu:e,closeNavMenu:()=>{e&&e.classList.remove("show-menu")},menuBtn:s,navClose:n}};let{navList:navList,navMenu:navMenu,closeNavMenu:closeNavMenu,menuBtn:menuBtn,navClose:navClose}=domElements();class NavLinks{getLinks=async()=>{try{const t=await fetch("/data/nav-data/navlinks.json");return await t.json()}catch(t){console.error(t)}};displayNavLinks=t=>{t.forEach((t=>{navList&&navList.insertAdjacentHTML("beforeend",`\n                <li class="nav__item">\n                    <a href="${t.link}" class="nav__link active-link" onclick="closeNavMenu()">${t.text}</a>\n                </li>`)}))};openMobMenu=()=>{menuBtn&&menuBtn.addEventListener("click",(()=>navMenu.classList.add("show-menu"))),navClose&&navClose.addEventListener("click",(()=>navMenu.classList.remove("show-menu")))}}(async()=>{const t=new NavLinks,e=await t.getLinks();t.displayNavLinks(e),t.openMobMenu()})();class Products{displayProducts=async()=>{const t=["/data/products-data/amped.json","/data/products-data/mochas.json","/data/products-data/lattes.json"].map((async t=>{const e=await fetch(t);return await e.json()})),e=await Promise.all(t);let s,n,a;s=e[0],n=e[1],a=e[2],this.ampedController(s),this.mochaController(n),this.latteController(a),this.productTabsController()};latteController(t){const e=document.querySelector("#lattes .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}mochaController(t){const e=document.querySelector("#mochas .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}ampedController(t){const e=document.querySelector("#amped .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}productTabsController=()=>{const t=document.querySelectorAll(".products__item");function e(e){const s=e.currentTarget,n=s.dataset.product;document.querySelectorAll(".products__content").forEach((t=>{t.classList.remove("active-content")})),t.forEach((t=>{t.classList.remove("active-link")})),document.querySelector(`#${n}`).classList.add("active-content"),s.classList.add("active-link")}t.forEach((t=>{t.addEventListener("click",e)}))}}(async()=>{(new Products).displayProducts()})();const globals=()=>({containers:[...document.querySelectorAll(".slide__container")],prevBtn:document.querySelector(".prev__slide"),nextBtn:document.querySelector(".next__slide"),currSlide:0});let{containers:containers,prevBtn:prevBtn,nextBtn:nextBtn,currSlide:currSlide}={containers:[...document.querySelectorAll(".slide__container")],prevBtn:document.querySelector(".prev__slide"),nextBtn:document.querySelector(".next__slide"),currSlide:0};class Testimonials{getSlides=async()=>{try{const t=await fetch("/data/slider-data/slider-data.json");return await t.json()}catch(t){console.error(t)}};displaySlides=t=>{containers&&containers.forEach(((e,s)=>{t.forEach(((t,n)=>{s===n&&(e.innerHTML=`\n                        <div class="slide">\n                            <img src="${t.quoteIcon}" alt="" class="slide__quote" width="30px" height="30px">\n                            <div class="user">\n                                <img src="${t.image}" alt="" class="user__img">\n                                <div class="user__info">\n                                    <h3>${t.name}</h3>\n                                    <div class="user__stars">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                        <img src="${t.starIcon}" alt="" class="star" width="20px" height="20px">\n                                    </div>\n                                </div>\n                            </div>\n                            <p class="user__description">${t.description}</p>\n                        </div> `)}))}))};removeActive=(t,e)=>{t[e].classList.remove("active-slide")};addActive=(t,e)=>{t[e].classList.add("active-slide")};setupSlides=()=>{nextBtn&&(nextBtn.onclick=()=>{this.removeActive(containers,currSlide),currSlide=(currSlide+1)%containers.length,this.addActive(containers,currSlide)}),prevBtn&&(prevBtn.onclick=()=>{this.removeActive(containers,currSlide),currSlide=(currSlide-1+containers.length)%containers.length,this.addActive(containers,currSlide)})}}(async()=>{const t=new Testimonials,e=await t.getSlides();t.displaySlides(e),t.setupSlides()})();class Specialities{getGroups=async()=>{try{const t=await fetch("/data/speciality-data/speciality.json");return await t.json()}catch(t){console.error(t)}};displaySpecialities=t=>{const e=document.querySelector(".speciality__category");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <div class="speciality__group speciality__line">\n                        <img src="${t.image}" alt="" class="speciality__img" width="20px" height="20px">\n                        <h3 class="speciality__title">${t.title}</h3>\n                        <p class="speciality__description">${t.description}</p>\n                    </div>\n                `)}))}}function scrollHeader(){const t=document.getElementById("header");this.scrollY>=50?t.classList.add("scroll-header"):t.classList.remove("scroll-header")}(async()=>{const t=new Specialities,e=await t.getGroups();t.displaySpecialities(e)})(),window.addEventListener("scroll",scrollHeader);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BsYXlCbG9ncy5qcyIsImRpc3BsYXlMaW5rcy5qcyIsImRpc3BsYXlQcm9kdWN0cy5qcyIsImRpc3BsYXlTbGlkZXMuanMiLCJkaXNwbGF5U3BlY2lhbGl0aWVzLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIkJsb2dzIiwiZ2V0QmxvZ3MiLCJhc3luYyIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiZGlzcGxheUJsb2dzIiwiYmxvZ3MiLCJibG9nQ29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJibG9nIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiaW1hZ2UiLCJidG5JY29uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNvbW1lbnRJY29uIiwiY29tbWVudE51bSIsInNob3dJY29uIiwic2hvd051bSIsImFwaUJsb2dzIiwiZG9tRWxlbWVudHMiLCJuYXZMaXN0IiwibmF2TWVudSIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsIm5hdkNsb3NlIiwiY2xvc2VOYXZNZW51IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiTmF2TGlua3MiLCJnZXRMaW5rcyIsImRpc3BsYXlOYXZMaW5rcyIsImxpbmtzIiwibGluayIsInRleHQiLCJvcGVuTW9iTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGQiLCJuYXZsaW5rcyIsIlByb2R1Y3RzIiwiZGlzcGxheVByb2R1Y3RzIiwicHJvbWlzZXMiLCJtYXAiLCJ1cmwiLCJkYXRhIiwiUHJvbWlzZSIsImFsbCIsImFtcGVkIiwibW9jaGFzIiwibGF0dGVzIiwidGhpcyIsImFtcGVkQ29udHJvbGxlciIsIm1vY2hhQ29udHJvbGxlciIsImxhdHRlQ29udHJvbGxlciIsInByb2R1Y3RUYWJzQ29udHJvbGxlciIsImxhdHRlV3JhcHBlciIsImxhdHRlIiwicHJpY2UiLCJuYW1lIiwiY2FydEljb24iLCJtb2NoYVdyYXBwZXIiLCJtb2NoYSIsImFtcGVkV3JhcHBlciIsIml0ZW0iLCJwcm9kdWN0c0xpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImNoYW5nZVByb2R1Y3RzIiwiZSIsImxpbmtUYXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicHJvZHVjdCIsImRhdGFzZXQiLCJjb250ZW50IiwiZ2xvYmFscyIsImNvbnRhaW5lcnMiLCJwcmV2QnRuIiwibmV4dEJ0biIsImN1cnJTbGlkZSIsIlRlc3RpbW9uaWFscyIsImdldFNsaWRlcyIsImRpc3BsYXlTbGlkZXMiLCJzbGlkZXMiLCJjb250YWluZXIiLCJjSWR4Iiwic2xpZGUiLCJzSWR4IiwiaW5uZXJIVE1MIiwicXVvdGVJY29uIiwic3Rhckljb24iLCJyZW1vdmVBY3RpdmUiLCJlbGVtZW50IiwiYWRkQWN0aXZlIiwic2V0dXBTbGlkZXMiLCJvbmNsaWNrIiwibGVuZ3RoIiwidGVzdGltb25pYWxzIiwiU3BlY2lhbGl0aWVzIiwiZ2V0R3JvdXBzIiwiZGlzcGxheVNwZWNpYWxpdGllcyIsImdyb3VwcyIsImNhdGVnb3J5IiwiZ3JvdXAiLCJzY3JvbGxIZWFkZXIiLCJoZWFkZXIiLCJzY3JvbGxZIiwic3BlY2lhbGl0aWVzIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLE1BQUFBLE1BQ0FDLFNBQUFDLFVBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLDhCQUVBLGFBREFELEVBQUFFLE1BS0EsQ0FGQSxNQUFBQyxHQUNBQyxRQUFBRCxNQUFBQSxFQUNBLEdBR0FFLGFBQUFDLElBQ0EsTUFBQUMsRUFBQUMsU0FBQUMsY0FBQSxrQkFDQUgsRUFBQUksU0FBQUMsSUFDQUosR0FDQUEsRUFBQUssbUJBQUEsWUFBQSxnSkFHQUQsRUFBQUUsOElBRUFGLEVBQUFHLGtPQUlBSCxFQUFBSSx3RUFDQUosRUFBQUssd0xBR0FMLEVBQUFNLHlHQUNBTixFQUFBTywwS0FHQVAsRUFBQVEsd0dBQ0FSLEVBQUFTLGdMQU1BLEdBQ0EsRUFJQSxXQUNBLE1BQUFkLEVBQUEsSUFBQVQsTUFDQXdCLFFBQUFmLEVB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V0FDQUEsV0FBQUEsVUFBQSxHQUFBSCxXQUFBb0IsT0FDQTVDLEtBQUF5QyxVQUFBakIsV0FBQUcsVUFBQSxHQUlBRixVQUNBQSxRQUFBa0IsUUFBQSxLQUNBM0MsS0FBQXVDLGFBQUFmLFdBQUFHLFdBQ0FBLFdBQUFBLFVBQUEsRUFBQUgsV0FBQW9CLFFBQUFwQixXQUFBb0IsT0FDQTVDLEtBQUF5QyxVQUFBakIsV0FBQUcsVUFBQSxFQUVBLEVBSUEsV0FDQSxNQUFBa0IsRUFBQSxJQUFBakIsYUFDQUcsUUFBQWMsRUFBQWhCLFlBQ0FnQixFQUFBZixjQUFBQyxHQUNBYyxFQUFBSCxhQUNBLEVBTEEsR0M3RUEsTUFBQUksYUFDQUMsVUFBQXBHLFVBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLHlDQUVBLGFBREFELEVBQUFFLE1BS0EsQ0FGQSxNQUFBQyxHQUNBQyxRQUFBRCxNQUFBQSxFQUNBLEdBR0FpRyxvQkFBQUMsSUFDQSxNQUFBQyxFQUFBOUYsU0FBQUMsY0FBQSx5QkFDQTRGLEVBQUEzRixTQUFBNkYsSUFDQUQsR0FDQUEsRUFBQTFGLG1CQUFBLFlBQUEsNkdBRUEyRixFQUFBMUYsNEhBQ0EwRixFQUFBeEYsMEVBQ0F3RixFQUFBdkYsZ0VBR0EsR0FDQSxFQ3hCQSxTQUFBd0YsZUFDQSxNQUFBQyxFQUFBakcsU0FBQWtCLGVBQUEsVUFFQTBCLEtBQUFzRCxTQUFBLEdBQ0FELEVBQUE1RSxVQUFBVSxJQUFBLGlCQUdBa0UsRUFBQTVFLFVBQUFDLE9BQUEsZ0JBRUEsQ0RtQkEsV0FDQSxNQUFBNkUsRUFBQSxJQUFBVCxhQUNBRyxRQUFBTSxFQUFBUixZQUNBUSxFQUFBUCxvQkFBQUMsRUFDQSxFQUpBLEdDaEJBTyxPQUFBdEUsaUJBQUEsU0FBQWtFIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXHJcblxyXG5jbGFzcyBCbG9ncyB7XHJcbiAgICBnZXRCbG9ncyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvYmxvZy1kYXRhL2Jsb2dzLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgYmxvZ3MgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2dzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUJsb2dzID0gYmxvZ3MgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJsb2dDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ibG9nX19jb250ZW50XCIpXHJcbiAgICAgICAgYmxvZ3MuZm9yRWFjaChibG9nID0+IHtcclxuICAgICAgICAgICAgaWYgKGJsb2dDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBibG9nQ29udGVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwiYmxvZ19fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmxvZ19faW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtibG9nLmltYWdlfVwiIGFsdD1cIlwiIGNsYXNzPVwiYmxvZ19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwiYmxvZ19fYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Jsb2cuYnRuSWNvbn1cIiBhbHQ9XCJhcnJvdyBpY29uXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJsb2dfX2RhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImJsb2dfX3RpdGxlXCI+JHtibG9nLnRpdGxlfTwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImJsb2dfX2Rlc2NyaXB0aW9uXCI+JHtibG9nLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibG9nX19mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmxvZ19fcmVhY3Rpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Jsb2cuY29tbWVudEljb259XCIgYWx0PVwiY29tZW50IGljb25cIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7YmxvZy5jb21tZW50TnVtfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmxvZ19fcmVhY3Rpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Jsb2cuc2hvd0ljb259XCIgYWx0PVwicmVhY3Rpb24gaWNvblwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtibG9nLnNob3dOdW19Szwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgICAgICBgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBibG9ncyA9IG5ldyBCbG9ncygpXHJcbiAgICBjb25zdCBhcGlCbG9ncyA9IGF3YWl0IGJsb2dzLmdldEJsb2dzKClcclxuICAgIGJsb2dzLmRpc3BsYXlCbG9ncyhhcGlCbG9ncylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY29uc3QgZG9tRWxlbWVudHMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBuYXZMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX2xpc3RcIilcclxuICAgIGNvbnN0IG5hdk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbWVudVwiKVxyXG4gICAgY29uc3QgbWVudUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudS1idG5cIilcclxuICAgIGNvbnN0IG5hdkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXYtY2xvc2VcIilcclxuICAgIGNvbnN0IGNsb3NlTmF2TWVudSA9ICgpID0+IHtcclxuICAgICAgICBpZihuYXZNZW51KSBuYXZNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1lbnVcIilcclxuICAgIH1cclxuICAgIHJldHVybiB7IG5hdkxpc3QsIG5hdk1lbnUsIGNsb3NlTmF2TWVudSwgbWVudUJ0biwgbmF2Q2xvc2UgfVxyXG59O1xyXG5cclxubGV0IHtuYXZMaXN0LCBuYXZNZW51LCBjbG9zZU5hdk1lbnUsIG1lbnVCdG4sIG5hdkNsb3NlfSA9IGRvbUVsZW1lbnRzKClcclxuXHJcbmNsYXNzIE5hdkxpbmtzIHtcclxuICAgICBnZXRMaW5rcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvbmF2LWRhdGEvbmF2bGlua3MuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBsaW5rcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gbGlua3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5TmF2TGlua3MgPSBsaW5rcyA9PiB7XHJcbiAgICAgICAgbGlua3MuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgaWYgKG5hdkxpc3QpIHtcclxuICAgICAgICAgICAgICAgIG5hdkxpc3QuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGBcclxuICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cIm5hdl9faXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke2xpbmsubGlua31cIiBjbGFzcz1cIm5hdl9fbGluayBhY3RpdmUtbGlua1wiIG9uY2xpY2s9XCJjbG9zZU5hdk1lbnUoKVwiPiR7bGluay50ZXh0fTwvYT5cclxuICAgICAgICAgICAgICAgIDwvbGk+YClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgb3Blbk1vYk1lbnUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lbnVCdG4pIG1lbnVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG5hdk1lbnUuY2xhc3NMaXN0LmFkZChcInNob3ctbWVudVwiKSlcclxuICAgIFxyXG4gICAgICAgIGlmIChuYXZDbG9zZSkgbmF2Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG5hdk1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbWVudVwiKSlcclxuICAgIH07XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbmF2bGlua3MgPSBuZXcgTmF2TGlua3MoKVxyXG4gICAgY29uc3QgbGlua3MgPSBhd2FpdCBuYXZsaW5rcy5nZXRMaW5rcygpXHJcbiAgICBuYXZsaW5rcy5kaXNwbGF5TmF2TGlua3MobGlua3MpXHJcbiAgICBuYXZsaW5rcy5vcGVuTW9iTWVudSgpXHJcbn0pKCk7XHJcblxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNsYXNzIFByb2R1Y3RzIHtcclxuICAgIGRpc3BsYXlQcm9kdWN0cyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCB1cmxzID0gW1xyXG4gICAgICAgICAgICBcIi9kYXRhL3Byb2R1Y3RzLWRhdGEvYW1wZWQuanNvblwiLFxyXG4gICAgICAgICAgICBcIi9kYXRhL3Byb2R1Y3RzLWRhdGEvbW9jaGFzLmpzb25cIixcclxuICAgICAgICAgICAgXCIvZGF0YS9wcm9kdWN0cy1kYXRhL2xhdHRlcy5qc29uXCJcclxuICAgICAgICBdO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB1cmxzLm1hcChhc3luYyB1cmwgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcylcclxuICAgIFxyXG4gICAgICAgIGxldCBhbXBlZCwgbW9jaGFzLCBsYXR0ZXM7XHJcbiAgICAgICAgYW1wZWQgPSBkYXRhWzBdO1xyXG4gICAgICAgIG1vY2hhcyA9IGRhdGFbMV07XHJcbiAgICAgICAgbGF0dGVzID0gZGF0YVsyXTtcclxuICAgIFxyXG4gICAgICAgIHRoaXMuYW1wZWRDb250cm9sbGVyKGFtcGVkKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2NoYUNvbnRyb2xsZXIobW9jaGFzKTtcclxuXHJcbiAgICAgICAgdGhpcy5sYXR0ZUNvbnRyb2xsZXIobGF0dGVzKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcm9kdWN0VGFic0NvbnRyb2xsZXIoKVxyXG4gICAgfVxyXG5cclxuICAgIGxhdHRlQ29udHJvbGxlcihsYXR0ZXMpIHtcclxuICAgICAgICBjb25zdCBsYXR0ZVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdHRlcyAucHJvZHVjdHNfX3dyYXBwZXJcIik7XHJcbiAgICAgICAgbGF0dGVzLmZvckVhY2gobGF0dGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAobGF0dGVXcmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICBsYXR0ZVdyYXBwZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGBcclxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cInByb2R1Y3RzX19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0c19fc2hhcGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtsYXR0ZS5pbWFnZX1cIiBhbHQ9XCJjYWtlIHByb2R1Y3RcIiBjbGFzcz1cInByb2R1Y3RzX19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0c19fZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fcHJpY2VcIj4ke2xhdHRlLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX25hbWVcIj4ke2xhdHRlLm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBwcm9kdWN0c19fYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2xhdHRlLmNhcnRJY29ufVwiIGFsdD1cInNob3BwaW5nIGNhcnRcIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxyXG4gICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBtb2NoYUNvbnRyb2xsZXIobW9jaGFzKSB7XHJcbiAgICAgICAgY29uc3QgbW9jaGFXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2NoYXMgLnByb2R1Y3RzX193cmFwcGVyXCIpO1xyXG4gICAgICAgIG1vY2hhcy5mb3JFYWNoKG1vY2hhID0+IHtcclxuICAgICAgICAgICAgaWYgKG1vY2hhV3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgbW9jaGFXcmFwcGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJwcm9kdWN0c19fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHNfX3NoYXBlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bW9jaGEuaW1hZ2V9XCIgYWx0PVwiY2FrZSBwcm9kdWN0XCIgY2xhc3M9XCJwcm9kdWN0c19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHNfX2RhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX3ByaWNlXCI+JHttb2NoYS5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzX19uYW1lXCI+JHttb2NoYS5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gcHJvZHVjdHNfX2J1dHRvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHttb2NoYS5jYXJ0SWNvbn1cIiBhbHQ9XCJzaG9wcGluZyBjYXJ0XCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYW1wZWRDb250cm9sbGVyKGFtcGVkKSB7XHJcbiAgICAgICAgY29uc3QgYW1wZWRXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbXBlZCAucHJvZHVjdHNfX3dyYXBwZXJcIik7XHJcbiAgICAgICAgYW1wZWQuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKGFtcGVkV3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgYW1wZWRXcmFwcGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJwcm9kdWN0c19fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHNfX3NoYXBlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS5pbWFnZX1cIiBhbHQ9XCJjYWtlIHByb2R1Y3RcIiBjbGFzcz1cInByb2R1Y3RzX19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0c19fZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fcHJpY2VcIj4ke2l0ZW0ucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fbmFtZVwiPiR7aXRlbS5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gcHJvZHVjdHNfX2J1dHRvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtpdGVtLmNhcnRJY29ufVwiIGFsdD1cInNob3BwaW5nIGNhcnRcIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxyXG4gICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9kdWN0VGFic0NvbnRyb2xsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdHNMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZHVjdHNfX2l0ZW1cIilcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZVByb2R1Y3RzKGUpIHtcclxuICAgICAgICAgICAgY29uc3QgbGlua1RhcmdldCA9IGUuY3VycmVudFRhcmdldDtcclxuICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IGxpbmtUYXJnZXQuZGF0YXNldC5wcm9kdWN0O1xyXG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0c0NvbnRlbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0c19fY29udGVudFwiKVxyXG4gICAgXHJcbiAgICAgICAgICAgIHByb2R1Y3RzQ29udGVudHMuZm9yRWFjaChjb250ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1jb250ZW50XCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHByb2R1Y3RzTGlua3MuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1saW5rXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7cHJvZHVjdH1gKS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLWNvbnRlbnRcIilcclxuICAgICAgICAgICAgbGlua1RhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLWxpbmtcIilcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBwcm9kdWN0c0xpbmtzLmZvckVhY2gobGluayA9PiB7XHJcbiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoYW5nZVByb2R1Y3RzKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHByb2R1Y3RzID0gbmV3IFByb2R1Y3RzKClcclxuICAgIHByb2R1Y3RzLmRpc3BsYXlQcm9kdWN0cygpXHJcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNvbnN0IGdsb2JhbHMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjb250YWluZXJzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVfX2NvbnRhaW5lclwiKV1cclxuICAgIGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZXZfX3NsaWRlXCIpXHJcbiAgICBjb25zdCBuZXh0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXh0X19zbGlkZVwiKVxyXG4gICAgbGV0IGN1cnJTbGlkZSA9IDA7XHJcbiAgICByZXR1cm4ge2NvbnRhaW5lcnMsIHByZXZCdG4sIG5leHRCdG4sIGN1cnJTbGlkZX1cclxufTtcclxubGV0IHtjb250YWluZXJzLCBwcmV2QnRuLCBuZXh0QnRuLCBjdXJyU2xpZGV9ID0gZ2xvYmFscygpXHJcblxyXG5jbGFzcyBUZXN0aW1vbmlhbHMge1xyXG4gICAgZ2V0U2xpZGVzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9zbGlkZXItZGF0YS9zbGlkZXItZGF0YS5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gc2xpZGVzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5U2xpZGVzID0gc2xpZGVzID0+IHtcclxuICAgICAgICBpZiAoY29udGFpbmVycykge1xyXG4gICAgICAgICAgICBjb250YWluZXJzLmZvckVhY2goKGNvbnRhaW5lciwgY0lkeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzLmZvckVhY2goKHNsaWRlLCBzSWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNJZHggPT09IHNJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7c2xpZGUucXVvdGVJY29ufVwiIGFsdD1cIlwiIGNsYXNzPVwic2xpZGVfX3F1b3RlXCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVzZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7c2xpZGUuaW1hZ2V9XCIgYWx0PVwiXCIgY2xhc3M9XCJ1c2VyX19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXNlcl9faW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+JHtzbGlkZS5uYW1lfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1c2VyX19zdGFyc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3NsaWRlLnN0YXJJY29ufVwiIGFsdD1cIlwiIGNsYXNzPVwic3RhclwiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtzbGlkZS5zdGFySWNvbn1cIiBhbHQ9XCJcIiBjbGFzcz1cInN0YXJcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7c2xpZGUuc3Rhckljb259XCIgYWx0PVwiXCIgY2xhc3M9XCJzdGFyXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3NsaWRlLnN0YXJJY29ufVwiIGFsdD1cIlwiIGNsYXNzPVwic3RhclwiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtzbGlkZS5zdGFySWNvbn1cIiBhbHQ9XCJcIiBjbGFzcz1cInN0YXJcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInVzZXJfX2Rlc2NyaXB0aW9uXCI+JHtzbGlkZS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiBgXHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBY3RpdmUgPSAoaXRlbSwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGl0ZW1bZWxlbWVudF0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1zbGlkZVwiKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEFjdGl2ZSA9IChpdGVtLCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaXRlbVtlbGVtZW50XS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXNsaWRlXCIpXHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXBTbGlkZXMgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKG5leHRCdG4pIHtcclxuICAgICAgICAgICAgbmV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUoY29udGFpbmVycywgY3VyclNsaWRlKVxyXG4gICAgICAgICAgICAgICAgY3VyclNsaWRlID0gKGN1cnJTbGlkZSArIDEpICUgY29udGFpbmVycy5sZW5ndGhcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aXZlKGNvbnRhaW5lcnMsIGN1cnJTbGlkZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHByZXZCdG4pIHtcclxuICAgICAgICAgICAgcHJldkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUoY29udGFpbmVycywgY3VyclNsaWRlKVxyXG4gICAgICAgICAgICAgICAgY3VyclNsaWRlID0gKGN1cnJTbGlkZSAtIDEgKyBjb250YWluZXJzLmxlbmd0aCkgJSBjb250YWluZXJzLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBY3RpdmUoY29udGFpbmVycywgY3VyclNsaWRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHRlc3RpbW9uaWFscyA9IG5ldyBUZXN0aW1vbmlhbHMoKVxyXG4gICAgY29uc3Qgc2xpZGVzID0gYXdhaXQgdGVzdGltb25pYWxzLmdldFNsaWRlcygpXHJcbiAgICB0ZXN0aW1vbmlhbHMuZGlzcGxheVNsaWRlcyhzbGlkZXMpXHJcbiAgICB0ZXN0aW1vbmlhbHMuc2V0dXBTbGlkZXMoKVxyXG59KSgpOyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5jbGFzcyBTcGVjaWFsaXRpZXMge1xyXG4gICAgZ2V0R3JvdXBzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9zcGVjaWFsaXR5LWRhdGEvc3BlY2lhbGl0eS5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheVNwZWNpYWxpdGllcyA9IGdyb3VwcyA9PiB7XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwZWNpYWxpdHlfX2NhdGVnb3J5XCIpXHJcbiAgICAgICAgZ3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwZWNpYWxpdHlfX2dyb3VwIHNwZWNpYWxpdHlfX2xpbmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2dyb3VwLmltYWdlfVwiIGFsdD1cIlwiIGNsYXNzPVwic3BlY2lhbGl0eV9faW1nXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJzcGVjaWFsaXR5X190aXRsZVwiPiR7Z3JvdXAudGl0bGV9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzcGVjaWFsaXR5X19kZXNjcmlwdGlvblwiPiR7Z3JvdXAuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3BlY2lhbGl0aWVzID0gbmV3IFNwZWNpYWxpdGllcygpXHJcbiAgICBjb25zdCBncm91cHMgPSBhd2FpdCBzcGVjaWFsaXRpZXMuZ2V0R3JvdXBzKClcclxuICAgIHNwZWNpYWxpdGllcy5kaXNwbGF5U3BlY2lhbGl0aWVzKGdyb3VwcylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsSGVhZGVyKCkge1xyXG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIilcclxuXHJcbiAgICBpZiAodGhpcy5zY3JvbGxZID49IDUwKSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJzY3JvbGwtaGVhZGVyXCIpXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcInNjcm9sbC1oZWFkZXJcIilcclxuICAgIH1cclxufTtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBzY3JvbGxIZWFkZXIpO1xyXG59KSgpXHJcblxyXG4iXX0=
