"use strict";const domElements=()=>{const t=document.querySelector(".nav__list"),e=document.querySelector(".nav__menu"),s=document.getElementById("menu-btn"),n=document.getElementById("nav-close");return{navList:t,navMenu:e,closeNavMenu:()=>{e&&e.classList.remove("show-menu")},menuBtn:s,navClose:n}};let{navList:navList,navMenu:navMenu,closeNavMenu:closeNavMenu,menuBtn:menuBtn,navClose:navClose}=domElements();class NavLinks{getLinks=async()=>{try{const t=await fetch("/data/nav-data/navlinks.json");return await t.json()}catch(t){console.error(t)}};displayNavLinks=t=>{t.forEach((t=>{navList&&navList.insertAdjacentHTML("beforeend",`\n                <li class="nav__item">\n                    <a href="${t.link}" class="nav__link active-link" onclick="closeNavMenu()">${t.text}</a>\n                </li>`)}))};openMobMenu=()=>{menuBtn&&menuBtn.addEventListener("click",(()=>navMenu.classList.add("show-menu"))),navClose&&navClose.addEventListener("click",(()=>navMenu.classList.remove("show-menu")))}}(async()=>{const t=new NavLinks,e=await t.getLinks();t.displayNavLinks(e),t.openMobMenu()})();class Products{displayProducts=async()=>{const t=["/data/products-data/amped.json","/data/products-data/mochas.json","/data/products-data/lattes.json"].map((async t=>{const e=await fetch(t);return await e.json()})),e=await Promise.all(t);let s,n,a;s=e[0],n=e[1],a=e[2],this.ampedController(s),this.mochaController(n),this.latteController(a),this.productTabsController()};latteController(t){const e=document.querySelector("#lattes .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}mochaController(t){const e=document.querySelector("#mochas .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}ampedController(t){const e=document.querySelector("#amped .products__wrapper");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <article class="products__card">\n                        <div class="products__shape">\n                            <img src="${t.image}" alt="cake product" class="products__img">\n                        </div>\n                        <div class="products__data">\n                            <span class="products__price">${t.price}</span>\n                            <span class="products__name">${t.name}</span>\n                            <button class="button products__button">\n                                <img src="${t.cartIcon}" alt="shopping cart" width="30px" height="30px">\n                            </button>\n                        </div>\n                    </article>\n                `)}))}productTabsController=()=>{const t=document.querySelectorAll(".products__item");function e(e){const s=e.currentTarget,n=s.dataset.product;document.querySelectorAll(".products__content").forEach((t=>{t.classList.remove("active-content")})),t.forEach((t=>{t.classList.remove("active-link")})),document.querySelector(`#${n}`).classList.add("active-content"),s.classList.add("active-link")}t.forEach((t=>{t.addEventListener("click",e)}))}}(async()=>{(new Products).displayProducts()})();class Specialities{getGroups=async()=>{try{const t=await fetch("/data/speciality-data/speciality.json");return await t.json()}catch(t){console.error(t)}};displaySpecialities=t=>{const e=document.querySelector(".speciality__category");t.forEach((t=>{e&&e.insertAdjacentHTML("beforeend",`\n                    <div class="speciality__group speciality__line">\n                        <img src="${t.image}" alt="" class="speciality__img" width="20px" height="20px">\n                        <h3 class="speciality__title">${t.title}</h3>\n                        <p class="speciality__description">${t.description}</p>\n                    </div>\n                `)}))}}function scrollHeader(){const t=document.getElementById("header");this.scrollY>=50?t.classList.add("scroll-header"):t.classList.remove("scroll-header")}function setupSlides(){const t=[...document.querySelectorAll(".slide__container")],e=document.querySelector(".prev__slide"),s=document.querySelector(".next__slide");let n=0;e.addEventListener("click",(()=>{t[n].classList.remove("active-slide"),n=(n-1+t.length)%t.length,t[n].classList.add("active-slide")})),s.addEventListener("click",(()=>{t[n].classList.remove("active-slide"),n=(n+1)%t.length,t[n].classList.add("active-slide")}))}(async()=>{const t=new Specialities,e=await t.getGroups();t.displaySpecialities(e)})(),window.addEventListener("scroll",scrollHeader),setupSlides();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BsYXlMaW5rcy5qcyIsImRpc3BsYXlQcm9kdWN0cy5qcyIsImRpc3BsYXlTcGVjaWFsaXRpZXMuanMiLCJzY3JpcHQuanMiXSwibmFtZXMiOlsiZG9tRWxlbWVudHMiLCJuYXZMaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmF2TWVudSIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsIm5hdkNsb3NlIiwiY2xvc2VOYXZNZW51IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiTmF2TGlua3MiLCJnZXRMaW5rcyIsImFzeW5jIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJkaXNwbGF5TmF2TGlua3MiLCJsaW5rcyIsImZvckVhY2giLCJsaW5rIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwidGV4dCIsIm9wZW5Nb2JNZW51IiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZCIsIm5hdmxpbmtzIiwiUHJvZHVjdHMiLCJkaXNwbGF5UHJvZHVjdHMiLCJwcm9taXNlcyIsIm1hcCIsInVybCIsImRhdGEiLCJQcm9taXNlIiwiYWxsIiwiYW1wZWQiLCJtb2NoYXMiLCJsYXR0ZXMiLCJ0aGlzIiwiYW1wZWRDb250cm9sbGVyIiwibW9jaGFDb250cm9sbGVyIiwibGF0dGVDb250cm9sbGVyIiwicHJvZHVjdFRhYnNDb250cm9sbGVyIiwibGF0dGVXcmFwcGVyIiwibGF0dGUiLCJpbWFnZSIsInByaWNlIiwibmFtZSIsImNhcnRJY29uIiwibW9jaGFXcmFwcGVyIiwibW9jaGEiLCJhbXBlZFdyYXBwZXIiLCJpdGVtIiwicHJvZHVjdHNMaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGFuZ2VQcm9kdWN0cyIsImUiLCJsaW5rVGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInByb2R1Y3QiLCJkYXRhc2V0IiwiY29udGVudCIsIlNwZWNpYWxpdGllcyIsImdldEdyb3VwcyIsImRpc3BsYXlTcGVjaWFsaXRpZXMiLCJncm91cHMiLCJjYXRlZ29yeSIsImdyb3VwIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInNjcm9sbEhlYWRlciIsImhlYWRlciIsInNjcm9sbFkiLCJzZXR1cFNsaWRlcyIsInNsaWRlcyIsInByZXZCdG4iLCJuZXh0QnRuIiwiaW5kZXgiLCJsZW5ndGgiLCJzcGVjaWFsaXRpZXMiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsTUFBQUEsWUFBQSxLQUNBLE1BQUFDLEVBQUFDLFNBQUFDLGNBQUEsY0FDQUMsRUFBQUYsU0FBQUMsY0FBQSxjQUNBRSxFQUFBSCxTQUFBSSxlQUFBLFlBQ0FDLEVBQUFMLFNBQUFJLGVBQUEsYUFJQSxNQUFBLENBQUFMLFVBQUFHLFVBQUFJLGFBSEEsS0FDQUosR0FBQUEsRUFBQUssVUFBQUMsT0FBQSxZQUFBLEVBRUFMLFVBQUFFLFdBQUEsRUFHQSxJQUFBTixRQUFBQSxRQUFBRyxRQUFBQSxRQUFBSSxhQUFBQSxhQUFBSCxRQUFBQSxRQUFBRSxTQUFBQSxVQUFBUCxjQUVBLE1BQUFXLFNBQ0FDLFNBQUFDLFVBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLGdDQUVBLGFBREFELEVBQUFFLE1BS0EsQ0FGQSxNQUFBQyxHQUNBQyxRQUFBRCxNQUFBQSxFQUNBLEdBR0FFLGdCQUFBQyxJQUNBQSxFQUFBQyxTQUFBQyxJQUNBckIsU0FDQUEsUUFBQXNCLG1CQUFBLFlBQUEsMEVBRUFELEVBQUFBLGdFQUFBQSxFQUFBRSxrQ0FFQSxHQUNBLEVBR0FDLFlBQUEsS0FDQXBCLFNBQUFBLFFBQUFxQixpQkFBQSxTQUFBLElBQUF0QixRQUFBSyxVQUFBa0IsSUFBQSxlQUVBcEIsVUFBQUEsU0FBQW1CLGlCQUFBLFNBQUEsSUFBQXRCLFFBQUFLLFVBQUFDLE9BQUEsY0FBQSxFQUlBLFdBQ0EsTUFBQWtCLEVBQUEsSUFBQWpCLFNBQ0FTLFFBQUFRLEVBQUFoQixXQUNBZ0IsRUFBQVQsZ0JBQUFDLEdBQ0FRLEVBQUFILGFBQ0EsRUFMQSxHQzNDQSxNQUFBSSxTQUNBQyxnQkFBQWpCLFVBQ0Es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QyxPQUFBLGdCQUNBcUUsR0FBQUEsRUFBQSxHQUFBSCxFQUFBSSxPQUNBSixFQUFBRyxHQUFBdEUsVUFBQWtCLElBQUEsZUFBQSxHQVdBLENESEEsV0FDQSxNQUFBc0QsRUFBQSxJQUFBakIsYUFDQUcsUUFBQWMsRUFBQWhCLFlBQ0FnQixFQUFBZixvQkFBQUMsRUFDQSxFQUpBLEdDTUFlLE9BQUF4RCxpQkFBQSxTQUFBOEMsY0FDQUciLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNvbnN0IGRvbUVsZW1lbnRzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbmF2TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19saXN0XCIpXHJcbiAgICBjb25zdCBuYXZNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX21lbnVcIilcclxuICAgIGNvbnN0IG1lbnVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnUtYnRuXCIpXHJcbiAgICBjb25zdCBuYXZDbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LWNsb3NlXCIpXHJcbiAgICBjb25zdCBjbG9zZU5hdk1lbnUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYobmF2TWVudSkgbmF2TWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1tZW51XCIpXHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBuYXZMaXN0LCBuYXZNZW51LCBjbG9zZU5hdk1lbnUsIG1lbnVCdG4sIG5hdkNsb3NlIH1cclxufTtcclxuXHJcbmxldCB7bmF2TGlzdCwgbmF2TWVudSwgY2xvc2VOYXZNZW51LCBtZW51QnRuLCBuYXZDbG9zZX0gPSBkb21FbGVtZW50cygpXHJcblxyXG5jbGFzcyBOYXZMaW5rcyB7XHJcbiAgICAgZ2V0TGlua3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9kYXRhL25hdi1kYXRhL25hdmxpbmtzLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgbGlua3MgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmtzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheU5hdkxpbmtzID0gbGlua3MgPT4ge1xyXG4gICAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuYXZMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBuYXZMaXN0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJuYXZfX2l0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtsaW5rLmxpbmt9XCIgY2xhc3M9XCJuYXZfX2xpbmsgYWN0aXZlLWxpbmtcIiBvbmNsaWNrPVwiY2xvc2VOYXZNZW51KClcIj4ke2xpbmsudGV4dH08L2E+XHJcbiAgICAgICAgICAgICAgICA8L2xpPmApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW5Nb2JNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChtZW51QnRuKSBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBuYXZNZW51LmNsYXNzTGlzdC5hZGQoXCJzaG93LW1lbnVcIikpXHJcbiAgICBcclxuICAgICAgICBpZiAobmF2Q2xvc2UpIG5hdkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBuYXZNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1lbnVcIikpXHJcbiAgICB9O1xyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG5hdmxpbmtzID0gbmV3IE5hdkxpbmtzKClcclxuICAgIGNvbnN0IGxpbmtzID0gYXdhaXQgbmF2bGlua3MuZ2V0TGlua3MoKVxyXG4gICAgbmF2bGlua3MuZGlzcGxheU5hdkxpbmtzKGxpbmtzKVxyXG4gICAgbmF2bGlua3Mub3Blbk1vYk1lbnUoKVxyXG59KSgpO1xyXG5cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jbGFzcyBQcm9kdWN0cyB7XHJcbiAgICBkaXNwbGF5UHJvZHVjdHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXJscyA9IFtcclxuICAgICAgICAgICAgXCIvZGF0YS9wcm9kdWN0cy1kYXRhL2FtcGVkLmpzb25cIixcclxuICAgICAgICAgICAgXCIvZGF0YS9wcm9kdWN0cy1kYXRhL21vY2hhcy5qc29uXCIsXHJcbiAgICAgICAgICAgIFwiL2RhdGEvcHJvZHVjdHMtZGF0YS9sYXR0ZXMuanNvblwiXHJcbiAgICAgICAgXTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gdXJscy5tYXAoYXN5bmMgdXJsID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXHJcbiAgICBcclxuICAgICAgICBsZXQgYW1wZWQsIG1vY2hhcywgbGF0dGVzO1xyXG4gICAgICAgIGFtcGVkID0gZGF0YVswXTtcclxuICAgICAgICBtb2NoYXMgPSBkYXRhWzFdO1xyXG4gICAgICAgIGxhdHRlcyA9IGRhdGFbMl07XHJcbiAgICBcclxuICAgICAgICB0aGlzLmFtcGVkQ29udHJvbGxlcihhbXBlZCk7XHJcblxyXG4gICAgICAgIHRoaXMubW9jaGFDb250cm9sbGVyKG1vY2hhcyk7XHJcblxyXG4gICAgICAgIHRoaXMubGF0dGVDb250cm9sbGVyKGxhdHRlcyk7XHJcblxyXG4gICAgICAgIHRoaXMucHJvZHVjdFRhYnNDb250cm9sbGVyKClcclxuICAgIH1cclxuXHJcbiAgICBsYXR0ZUNvbnRyb2xsZXIobGF0dGVzKSB7XHJcbiAgICAgICAgY29uc3QgbGF0dGVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXR0ZXMgLnByb2R1Y3RzX193cmFwcGVyXCIpO1xyXG4gICAgICAgIGxhdHRlcy5mb3JFYWNoKGxhdHRlID0+IHtcclxuICAgICAgICAgICAgaWYgKGxhdHRlV3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgbGF0dGVXcmFwcGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJwcm9kdWN0c19fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHNfX3NoYXBlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bGF0dGUuaW1hZ2V9XCIgYWx0PVwiY2FrZSBwcm9kdWN0XCIgY2xhc3M9XCJwcm9kdWN0c19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHNfX2RhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX3ByaWNlXCI+JHtsYXR0ZS5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzX19uYW1lXCI+JHtsYXR0ZS5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gcHJvZHVjdHNfX2J1dHRvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtsYXR0ZS5jYXJ0SWNvbn1cIiBhbHQ9XCJzaG9wcGluZyBjYXJ0XCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9jaGFDb250cm9sbGVyKG1vY2hhcykge1xyXG4gICAgICAgIGNvbnN0IG1vY2hhV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9jaGFzIC5wcm9kdWN0c19fd3JhcHBlclwiKTtcclxuICAgICAgICBtb2NoYXMuZm9yRWFjaChtb2NoYSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChtb2NoYVdyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgIG1vY2hhV3JhcHBlci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwicHJvZHVjdHNfX2NhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzX19zaGFwZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke21vY2hhLmltYWdlfVwiIGFsdD1cImNha2UgcHJvZHVjdFwiIGNsYXNzPVwicHJvZHVjdHNfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzX19kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzX19wcmljZVwiPiR7bW9jaGEucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fbmFtZVwiPiR7bW9jaGEubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIHByb2R1Y3RzX19idXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bW9jaGEuY2FydEljb259XCIgYWx0PVwic2hvcHBpbmcgY2FydFwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFtcGVkQ29udHJvbGxlcihhbXBlZCkge1xyXG4gICAgICAgIGNvbnN0IGFtcGVkV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYW1wZWQgLnByb2R1Y3RzX193cmFwcGVyXCIpO1xyXG4gICAgICAgIGFtcGVkLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhbXBlZFdyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgIGFtcGVkV3JhcHBlci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwicHJvZHVjdHNfX2NhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RzX19zaGFwZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2l0ZW0uaW1hZ2V9XCIgYWx0PVwiY2FrZSBwcm9kdWN0XCIgY2xhc3M9XCJwcm9kdWN0c19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdHNfX2RhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX3ByaWNlXCI+JHtpdGVtLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX25hbWVcIj4ke2l0ZW0ubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIHByb2R1Y3RzX19idXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS5jYXJ0SWNvbn1cIiBhbHQ9XCJzaG9wcGluZyBjYXJ0XCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvZHVjdFRhYnNDb250cm9sbGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RzTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2R1Y3RzX19pdGVtXCIpXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjaGFuZ2VQcm9kdWN0cyhlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3QgPSBsaW5rVGFyZ2V0LmRhdGFzZXQucHJvZHVjdDtcclxuICAgICAgICAgICAgY29uc3QgcHJvZHVjdHNDb250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZHVjdHNfX2NvbnRlbnRcIilcclxuICAgIFxyXG4gICAgICAgICAgICBwcm9kdWN0c0NvbnRlbnRzLmZvckVhY2goY29udGVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtY29udGVudFwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBwcm9kdWN0c0xpbmtzLmZvckVhY2gobGluayA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtbGlua1wiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3Byb2R1Y3R9YCkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1jb250ZW50XCIpXHJcbiAgICAgICAgICAgIGxpbmtUYXJnZXQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1saW5rXCIpXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcHJvZHVjdHNMaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VQcm9kdWN0cylcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0cyA9IG5ldyBQcm9kdWN0cygpXHJcbiAgICBwcm9kdWN0cy5kaXNwbGF5UHJvZHVjdHMoKVxyXG59KSgpOyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5jbGFzcyBTcGVjaWFsaXRpZXMge1xyXG4gICAgZ2V0R3JvdXBzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9zcGVjaWFsaXR5LWRhdGEvc3BlY2lhbGl0eS5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheVNwZWNpYWxpdGllcyA9IGdyb3VwcyA9PiB7XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwZWNpYWxpdHlfX2NhdGVnb3J5XCIpXHJcbiAgICAgICAgZ3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwZWNpYWxpdHlfX2dyb3VwIHNwZWNpYWxpdHlfX2xpbmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2dyb3VwLmltYWdlfVwiIGFsdD1cIlwiIGNsYXNzPVwic3BlY2lhbGl0eV9faW1nXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJzcGVjaWFsaXR5X190aXRsZVwiPiR7Z3JvdXAudGl0bGV9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzcGVjaWFsaXR5X19kZXNjcmlwdGlvblwiPiR7Z3JvdXAuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3BlY2lhbGl0aWVzID0gbmV3IFNwZWNpYWxpdGllcygpXHJcbiAgICBjb25zdCBncm91cHMgPSBhd2FpdCBzcGVjaWFsaXRpZXMuZ2V0R3JvdXBzKClcclxuICAgIHNwZWNpYWxpdGllcy5kaXNwbGF5U3BlY2lhbGl0aWVzKGdyb3VwcylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsSGVhZGVyKCkge1xyXG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIilcclxuXHJcbiAgICBpZiAodGhpcy5zY3JvbGxZID49IDUwKSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJzY3JvbGwtaGVhZGVyXCIpXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcInNjcm9sbC1oZWFkZXJcIilcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIHNldHVwU2xpZGVzKCkge1xyXG4gICAgY29uc3Qgc2xpZGVzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVfX2NvbnRhaW5lclwiKV1cclxuICAgIGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZXZfX3NsaWRlXCIpXHJcbiAgICBjb25zdCBuZXh0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXh0X19zbGlkZVwiKVxyXG4gICAgbGV0IGluZGV4ID0gMFxyXG5cclxuICAgIGNvbnN0IG5leHRTbGlkZSA9ICgpID0+IHtcclxuICAgICAgICBzbGlkZXNbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtc2xpZGVcIilcclxuICAgICAgICBpbmRleCA9IChpbmRleCArIDEpICUgc2xpZGVzLmxlbmd0aFxyXG4gICAgICAgIHNsaWRlc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1zbGlkZVwiKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByZXZTbGlkZSA9ICgpID0+IHtcclxuICAgICAgICBzbGlkZXNbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtc2xpZGVcIilcclxuICAgICAgICBpbmRleCA9IChpbmRleCAtIDEgKyBzbGlkZXMubGVuZ3RoKSAlIHNsaWRlcy5sZW5ndGhcclxuICAgICAgICBzbGlkZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtc2xpZGVcIilcclxuICAgIH1cclxuXHJcbiAgICBwcmV2QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmV2U2xpZGUpXHJcbiAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBuZXh0U2xpZGUpXHJcbn07XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2Nyb2xsSGVhZGVyKTtcclxuICAgIHNldHVwU2xpZGVzKClcclxufSkoKVxyXG5cclxuIl19
